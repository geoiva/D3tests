<!DOCTYPE html>
<html>
<head>
    <title>responsive chart</title>
    <style type="text/css">
        .axis path,
        .axis line {
            fill: none;
            stroke: black;
            shape-rendering: crispEdges;
    </style>
</head>

<script src="../lib/d3.v3.min.js"></script>

<body>
<div id="Chart">
</div>

<script>

//based on jsFiddle by  Jonas Langvad
//and added advice from Fern of the Andes <fernoftheandes@gmail.com>


var margin = {top: 30, right: 0, bottom: 55, left: 45},
height = 400 - margin.top - margin.bottom,
width = 800 - margin.left - margin.right;

var data = [5, 7, 9, 15, 10, 11, 1, 3, 6, 9, 13, 10];

var x = d3.scale.ordinal()
.domain(d3.range(data.length))
.rangeRoundBands([0, width], 0.1);


var y = d3.scale.linear()
.domain([0, d3.max(data)])
.range([height, 0]);


var xAxis = d3.svg.axis()
.scale(x)
.orient('bottom');

var yAxis = d3.svg.axis()
.scale(y)
.orient('left');



var svg = d3.select('#Chart')
.append('svg')
.attr('preserveAspectRatio', 'xMinYMin')
.attr('viewBox', '0 0 ' + width + ' ' + height)
.attr('id', 'chart')
.attr('width', width + margin.left + margin.right)
.attr('height', height + margin.top + margin.bottom);


var main = svg.append('g')
.attr('transform', 'translate(' + margin.left + ')')
.attr('id', 'chartg');

main.append('g')
.attr('class', 'x axis')
.attr('id', 'xAxisg')
.attr('transform', 'translate(0,' + height + ')')
.call(xAxis)
.selectAll('text')
.style('text-anchor', 'end')
.attr('dx', '-.8em')
.attr('dy', '.15em')
.style('font-size', 11)
.style('font-family', 'sans-serif')
.attr('transform', function(d) {
return 'rotate(-65)'
});

main.append('g')
.attr('class', 'y axis')
.attr('id', 'yAxisg')
.call(yAxis)
.append('text')
.attr('transform', 'rotate(-90)')
.attr('y', 6)
.attr('y', '.71em')
.style('text-anchor', 'end');

main.selectAll('#bar')
.data(data)
.enter()
.append('rect')
.attr('id', 'bar')
.attr('x', function(d, i) { return x(i); })
.attr('width', x.rangeBand())
.attr('y', function(d) { return y(d); })
.attr('height', function(d) { return height - y(d); });


var chart = d3.select('#Chart'),
aspect = chart.width / chart.height,
container = chart.parent();


//$(window).on('resize', function() {

function resizeStuff() {


        var targetWidth = window.innerWidth;

        chart.attr('width', targetWidth);
        chart.attr('height', Math.round(targetWidth / aspect));

    alert(targetWidth);

    };

</script>



</body>
</html>